# Chapter1 - 웹 브라우저가 메시지를 만든다

> 조금은 신기한? 아니지 정확히는 잘 모르는 것들에 대해 정리했어요

---

### URL

> Uniform Resource Locator

모든 url은 가장 앞부분에 access할 때 사용하는 프로토콜을 명시한다. ex) http: , ftp:

여기서 프로토콜은 통신 동작의 규칙을 의미

**url 상세**

```
http://goofy.com/studies/java.html

http: 액세스 프로토콜
//    뒤에 나오는 문자열이 서버 리소스임을 의미
goofy.com 서버 리소스
/studies/java.html 리소스의 위치 표현
```

**브라우저가 특정 request를 받았을 때, 가장 먼저 수행하는 작업은 URL을 해독하는 것**

### URI

> Uniform Resource Identifier

URI는 액세스의 대상을 식별할때 사용 (다양한 범주에서 사용 가능)

URI는 URL을 포함

```
URI -> URL + Resource 식별 값 (식별이 가능한)
URL -> 위치정보
```

---

### Http Method

| method  | description                                                  |
| ------- | ------------------------------------------------------------ |
| HEAD    | HTTP 메시지 헤더만 반송하고, 데이터의 내용은 반환하지 않음<br />파일의 최종 갱신 일시와 같은 속성 정보를 조사할 때 사용 |
| OPTIONS | 통신 옵션을 통지하거나 조사할 때 사용                        |
| TRACE   | 서버측에서 받은 리퀘스트 라인과 헤더를 그대로 클라이언트에 반환<br />프록시 서버와 같은 환경에서 리퀘스트가 치환되는 상황을 조사할 때 사용 |
| CONNECT | 암호화한 메시지를 프록시로 전송할 때 사용                    |

> 브라우저는 URI 데이터를 분석하는 것만 가능하지, 실제로 네트워크 통신은 불가, 네트워크 통신은 OS단에서 진행

---

### TCP/IP 기반의 통신 간략

> 각각의 통신 모듈(모임, 집합)을 서브넷이라는 구역으로 잘게 잘게 나눔, 서브넷을 이어주는게 라우터, 어떤 요청이 들어오면 라우터는 인접한 서브넷으로 중계 작업을 진행, 계속 해당 작업이 진행되고, 요청한 액세스
> 주소에 다달으면 끝!

라우터가 메시지를 보낸 상대를 확인하여 다음 라우터를 판단하고, 거기에 보내도록 지시하여 송신 동작을 실행한 후, 다시 서브넷의 허브가 라우터까지 메시지를 보내는 작업을 반복하며 통신이 진행

---

### DNS Search

- DNS 서버에 조회 == DNS 서버에 조회 메세지를 보내고, 응답 메세지를 받는 것 == DNS 서버에 대해 클라이언트로 동작
- DNS 클라이언트 == DNS 리졸버 혹은 리졸버
- DNS의 원리를 사용하여 IP 주소를 조사하는 것 == 네임 리졸루션 (name resolution)
- name resolution을 실행하는 것을 resolver라고 함
- resolver == Socket Library에 들어 있는 특정 프로그램 == OS에 포함되어 있는 네트워크 기능을 수행하는 애플리케이션의 특정 기능
- 리졸버에서 데이터를 송신하는 기능은 OS단에서 진행 (resolver도 network 통신은 불가하기 때문)

---

### DNS 서버 동작

> 클라이언트에서 조회 메시지를 받고, 조회의 내용에 응답하는 형태로 정보를 회답하는 일을 수행

조금 더 간단하게 정의 -> **서버에 등록된 도메인명과 IP 주소의 대응표를 조사하여 IP 주소를 확답**

**DNS 조회 메세지 정보**

- 이름 : 전달 목적지
- 클래스 : 여러 네트워크의 식별 정보
- 타입 : 이름 부분에 어떤 종류의 정보가 들어가는지

---

### DNS 서버에 도메인 매핑 정보를 기록하다

- 특정 도메인에 대한 정보는 단일 DNS 서버에만 기록됨

---

### DNS 서버에서 도메인을 서칭하는 방법

- 하위의 도메인을 담당하는 DNS 서버의 IP 주소를 그 상위의 DNS 서버에 등록
- 상위의 DNS 서버를 그 상위 DNS 서버에 등록하는 것을 반복
- 상위 DNS에서 하향식으로 서칭 진행
- (루트도메인을 기준으로 요청한 데이터와 가장 근접한 DNS 서버에 정보 요청을 진행)

위의 정보 기록, 서칭등이 모두 설계 원칙에 따라 수행되는 것은 아님 -> 캐싱, dns 삽입시 도메인 단위를 건너 뛰는 행위들로..

---

### 프로토콜 스택에 메세지 송수신

> 엑세스 대상 웹 서버에 메시즈를 송신하도록 OS 내부의 프로토콜 스택에 의뢰하며 진행

**데이터의 송수신 단계**

1. 소켓을 생성
    1. 디스크립터 반환 (어떤 소켓에 연결할 것인지 정보를 가짐)
    2. 디스크립터의 정보를 기반으로 프로토콜 스택에 연결 요청 작업 진행, 해당 작업을 수행하면서, 클라이언트 측의 정보를 조회
2. 서버측의 소켓에 파이프 연결
    1. 실제로 클라이언트에서는 서버의 디스크립터를 알 수 없어서, 포트번호를 통해 소켓을 식별
3. 데이터 송수신
4. 파이프 분리, 소켓 말소

디스크립터 : 애플리케이션이 소켓을 식별하는 것

IP + port : 클라이언트와 서버 간에 상대의 소켓을 식별

---

### Question

- URI와 URL의 차이는?
- 사용자가 browser에 URL을 입력했을 때, 발생하는 대략적인 과정을 설명해보시오.
